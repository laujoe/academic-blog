{{/* å‚æ•°è·å– */}}
{{ $conference := .Get "conference" }} {{/* ä¼šè®®åç§° */}}
{{ $date := .Get "date" | default "TBD" }}
{{ $role := .Get "role" | default "attendee" }} {{/* speaker, poster, attendee */}}
{{ $location := .Get "location" }}
{{ $field := .Get "field" }}
{{ $level := .Get "level" }} {{/* å¦‚ CCF-A, CVPR */}}
{{ $url := .Get "url" }}

{{/* åŠ¨æ€æ ·å¼é€»è¾‘ */}}
{{ $theme := "#64748b" }} {{/* é»˜è®¤Attendee: è“ç°è‰² */}}
{{ $icon := "footprint" }}

{{ if eq $role "speaker" }}
    {{ $theme = "#e11d48" }} {{/* Speaker: ç«ç‘°çº¢ */}}
    {{ $icon = "mic" }}
{{ else if eq $role "poster" }}
    {{ $theme = "#d97706" }} {{/* Poster: ç¥ç€è‰² */}}
    {{ $icon = "image" }}
{{ end }}

<div class="hugo-conference-item role-{{ $role }}" style="--conf-color: {{ $theme }};">
    <div class="conf-marker">
        <div class="conf-line"></div>
        <div class="conf-icon-box">
            {{ if eq $icon "mic" }}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
            {{ else if eq $icon "image" }}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
            {{ else }}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
            {{ end }}
        </div>
    </div>

    <div class="conf-content">
        <div class="conf-header">
            <div class="conf-primary">
                <h3 class="conf-title">
                    {{ $conference }}
                    {{ if $url }}
                    <a href="{{ $url }}" target="_blank" class="conf-link-icon" title="è®¿é—®é“¾æ¥">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                    </a>
                    {{ end }}
                </h3>
                <div class="conf-meta-row">
                    <span class="conf-date">{{ $date }}</span>
                    {{ if $location }}
                    <span class="conf-location">
                        <svg class="conf-mini-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                        {{ $location }}
                    </span>
                    {{ end }}
                </div>
            </div>

            <div class="conf-badges">
                {{ if $level }}
                <span class="conf-badge level">{{ $level }}</span>
                {{ end }}
                <span class="conf-badge role">{{ title $role }}</span>
            </div>
        </div>

        {{ if $field }}
        <div class="conf-field-tag">
            <svg class="conf-mini-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
            {{ $field }}
        </div>
        {{ end }}

        <div class="conf-body">
            {{ .Inner | markdownify }}
        </div>
    </div>
</div>

<style>
    /* å®¹å™¨åŸºç¡€æ ·å¼ */
    .hugo-conference-item {
        /* â˜€ï¸ äº®è‰²æ¨¡å¼ (é€‚é… Congo Light) */
        --conf-bg-card: #ffffff;
        --conf-bg-icon-box: #ffffff;
        
        --conf-text-title: #1f2937; /* neutral-800 */
        --conf-text-body: #4b5563;  /* neutral-600 */
        --conf-text-meta: #6b7280;  /* neutral-500 */
        --conf-text-link: #9ca3af;
        
        --conf-line-color: #e5e7eb; /* neutral-200 */
        --conf-border: rgba(0,0,0,0.06);
        
        --conf-badge-level-bg: #f3f4f6;
        --conf-badge-level-text: #4b5563;
        --conf-badge-level-border: #e5e7eb;
        
        --conf-field-bg: rgba(0,0,0,0.04);
        --conf-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        --conf-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.08);

        display: flex;
        gap: 20px; /* å‡å°é—´è· */
        position: relative;
        padding-bottom: 2rem;
        font-family: inherit;
    }

    /* ğŸŒ™ æš—è‰²æ¨¡å¼ (é€‚é… Congo Dark) */
    @media (prefers-color-scheme: dark) {
        :root:not([data-scheme="light"]) .hugo-conference-item {
            --conf-bg-card: #1f2937; /* neutral-800 */
            --conf-bg-icon-box: #171717; /* neutral-900 */
            
            --conf-text-title: #f3f4f6; /* neutral-100 */
            --conf-text-body: #d1d5db;  /* neutral-300 */
            --conf-text-meta: #9ca3af;  /* neutral-400 */
            --conf-text-link: #6b7280;
            
            --conf-line-color: #374151; /* neutral-700 */
            --conf-border: #374151;
            
            --conf-badge-level-bg: #111827; /* neutral-900 */
            --conf-badge-level-text: #9ca3af;
            --conf-badge-level-border: #374151;
            
            --conf-field-bg: rgba(255,255,255,0.05);
            --conf-shadow: none;
            --conf-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }
    }

    html[data-scheme="dark"] .hugo-conference-item {
        --conf-bg-card: #1f2937;
        --conf-bg-icon-box: #171717;
        --conf-text-title: #f3f4f6;
        --conf-text-body: #d1d5db;
        --conf-text-meta: #9ca3af;
        --conf-text-link: #6b7280;
        --conf-line-color: #374151;
        --conf-border: #374151;
        --conf-badge-level-bg: #111827;
        --conf-badge-level-text: #9ca3af;
        --conf-badge-level-border: #374151;
        --conf-field-bg: rgba(255,255,255,0.05);
        --conf-shadow: none;
        --conf-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    }

    /* å·¦ä¾§æ—¶é—´è½´ç³»ç»Ÿ */
    .conf-marker {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex-shrink: 0;
        width: 36px; /* ç¼©å°æ ‡è®°å®½åº¦ */
    }

    .conf-line {
        position: absolute;
        top: 36px;
        bottom: 0;
        width: 2px;
        background: var(--conf-line-color);
        z-index: 0;
        transition: background 0.3s;
    }
    .hugo-conference-item:last-child .conf-line { display: none; }

    .conf-icon-box {
        width: 36px; /* ç¼©å°å›¾æ ‡ç›’å­ 42->36 */
        height: 36px;
        border-radius: 10px;
        background: var(--conf-bg-icon-box);
        border: 2px solid var(--conf-color);
        color: var(--conf-color);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        transition: transform 0.2s, background 0.3s, color 0.3s;
    }
    .hugo-conference-item:hover .conf-icon-box {
        transform: scale(1.1);
        background: var(--conf-color);
        color: #fff;
    }
    
    html[data-scheme="dark"] .hugo-conference-item:hover .conf-icon-box,
    @media (prefers-color-scheme: dark) {
        :root:not([data-scheme="light"]) .hugo-conference-item:hover .conf-icon-box {
            color: #fff; /* æš—è‰²æ¨¡å¼hoverä¹Ÿä¿æŒç™½è‰²æ–‡å­— */
        }
    }

    .conf-icon-box svg { width: 18px; height: 18px; } /* ç¼©å°å›¾æ ‡ */

    /* å³ä¾§å¡ç‰‡ */
    .conf-content {
        flex: 1;
        background: var(--conf-bg-card);
        border: 1px solid var(--conf-border);
        border-radius: 12px; /* åœ†è§’ç¨å¾®å˜å° */
        padding: 16px 20px; /* å‡å°å†…è¾¹è· */
        box-shadow: var(--conf-shadow);
        transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
        position: relative;
        overflow: hidden;
    }
    
    /* é¡¶éƒ¨å½©è‰²è£…é¥°æ¡ */
    .conf-content::before {
        content: "";
        position: absolute;
        top: 0; left: 0; width: 4px; height: 100%; /* å˜ç»† */
        background: var(--conf-color);
        opacity: 0.8;
    }

    .conf-content:hover {
        transform: translateY(-2px);
        box-shadow: var(--conf-shadow-hover);
    }

    /* å¤´éƒ¨å¸ƒå±€ */
    .conf-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 10px; /* å‡å°é—´è· */
        gap: 12px;
        flex-wrap: wrap;
    }

    /* æ ‡é¢˜ (é‡ç‚¹ä¿®å¤ï¼šå¤§å¹…ç¼©å°) */
    .conf-title {
        margin: 0 0 4px 0;
        font-size: 1.15rem; /* 1.7rem -> 1.15rem */
        font-weight: 700;
        color: var(--conf-text-title);
        line-height: 1.3;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .conf-link-icon { color: var(--conf-text-link); transition: color 0.2s; display: flex; }
    .conf-link-icon:hover { color: var(--conf-color); }
    .conf-link-icon svg { width: 16px; height: 16px; }

    /* å…ƒæ•°æ® (æ—¥æœŸ/åœ°ç‚¹) */
    .conf-meta-row {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 0.85rem; /* 1.4rem -> 0.85rem */
        color: var(--conf-text-meta);
    }
    
    .conf-location { display: flex; align-items: center; gap: 4px; }
    .conf-mini-icon { width: 12px; height: 12px; opacity: 0.8; }

    /* å¾½ç« ç³»ç»Ÿ */
    .conf-badges { display: flex; gap: 6px; align-items: center; }
    .conf-badge {
        font-size: 0.7rem; /* ç¼©å° */
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .conf-badge.role { background: var(--conf-color); color: #fff; }
    .conf-badge.level {
        background: var(--conf-badge-level-bg);
        color: var(--conf-badge-level-text);
        border: 1px solid var(--conf-badge-level-border);
    }

    /* å­¦ç§‘æ ‡ç­¾ */
    .conf-field-tag {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        font-size: 0.75rem; /* ç¼©å° */
        color: var(--conf-color);
        background: var(--conf-field-bg);
        padding: 3px 10px;
        border-radius: 50px;
        font-weight: 600;
        margin-bottom: 12px;
    }

    /* æ­£æ–‡ (é‡ç‚¹ä¿®å¤ï¼šå¤§å¹…ç¼©å°) */
    .conf-body {
        font-size: 0.95rem; /* 1.7rem -> 0.95rem */
        color: var(--conf-text-body);
        line-height: 1.6;
        border-top: 1px dashed var(--conf-line-color);
        padding-top: 12px;
    }
    .conf-body p { margin-bottom: 0.5em; }
    .conf-body ul { padding-left: 18px; margin: 0; }
</style>